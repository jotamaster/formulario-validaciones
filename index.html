<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <div class="row pt-5">
            <div class="md-12">
                <h3>Validaciones con JS</h3>
                <p>
                    Para validar formularios tenemos que tener en cuenta que un formulario puede estar compuesto por
                    varios tipos de inputs como text, number, etc.
                    también debemos entender que los inputs tienen eventos asociados a ellos como puede ser el evento
                    <em>keydown</em> y este evento se ejecuta cuando el usuario presiona una tecla
                    en el input, veamos un ejemplo:

                </p>
                <p>
                    Tenemos el input de tipo texto en el cual queremos insertar el nombre del usuario, al input le
                    indicamos el atributo nombre y el atributo id para usarlo como identificador.
                </p>
                <p>Ejemplo codigo html:</p>
                <code>
                    &lt;input type="text" name="nombre" id="inputNombre"&gt;
                </code>
                <br>
                <br>
                <p> En JS vamos a identificar nuestro input mediando su ID y haremos uso de su metodo
                    <em>addEventListener</em> que le pasaremos dos parámetros
                    el primero es el nombre del evento del input y segundo una función que tiene como parámetro el
                    evento del input con toda su información y que en este ejemplo es llamada <em>"e"</em> y el bloque
                    de la función simplemente
                    ejecuta un alert con el valor del input. Con esto logramos que cada vez que se presione una tecla
                    del input se ejecute ese código
                </p>
                <br>
                <code>
                    let inputNumbre = document.getElementById('inputNombre') 
                    inputNumbre.addEventListener('keydown', function(e){ 
                        alert(e.target.value) 
                    })
                </code>
                <br><br>
                <p>Prueba el ejemplo visto a continuación y nota como la primera vez que presionas una tecla el alert
                    esta vacío y esto pasa porque el evento que usamos se gatilla
                    al momento de apretar la tecla y aun no se agrega ese valor al input, podriamos decir que es previo
                    a la asignación de ese valor y ya cuando apretamos la segunda letra
                    el alert muestra la tecla anterior, luego de probar esto anda al codigo y usa otro evento llamado
                    <em>keyup</em> y ve la diferencia. <br> Ejemplo en practica:
                </p> <br>
                <p class="font-weight-light">Nota: recuerda que el primer parámetro del metodo <em>addEventListener</em>
                    es el nombre del evento</p>
                <label for="nombre">Nombre</label>
                <input type="text" name="nombre" id="inputNombre">
                <br><br>

                <h3>Casos de usos</h3>
                <p>En la vida real se podria ir validando cada campo al momento de ejecutar uno de estos eventos segun
                    tu necesidad, por ejemplo hagamos de cuenta que quieres
                    validar que el largo de la dirección sea mayor a 3 pero quieres que esta validación se haga al
                    momento de que el usuario pierda el foco del inputs o en otras palabras
                    cuando el usuario hace click en otro input o otra parte de la pantalla, entonces para ese caso
                    práctico nos sirve el evento <em>focusout</em> que se activa al perder el foco.
                </p>
                <p>Ejemplo codigo html:</p>
                <code>
                    &lt;input type="text" name="nombre" id="inputDireccion"&gt;
                </code>
                <br><br>
                <p>Código:</p>
                <code>
                    let inputDireccion = document.getElementById('inputDireccion') 
                    inputDireccion.addEventListener('focusout', function(e){ 
                        inputDireccion.style.borderColor = '' 
                        if(e.target.value.length &lt; 3){ 
                            inputDireccion.style.borderColor = 'red' 
                        }
                    })
                </code>
                <br>
                <br>
                <label for="nombre">Dirección</label>
                <input type="text" name="nombre" id="inputDireccion">
                <br><br>

                <p>
                    En el código al momento de ejecutarse el evento de <em>focusout</em> hacemos que el color del borde
                    del input quede vacio pero luego de eso
                    validamos si el largo de
                    la dirección es menor a 3 y siendo ese el caso agregamos el color red al borde del input y si esa
                    condición no se cumple simplemente no hace nada y
                    solo se ejecuta su linea anterior la cual le deja el color vacío. lo hice con el fin de evitar hacer
                    un else que tambien es factible.
                </p>

                <p>Lista de eventos mas populares JS </p>
                <div class="table" id="table-15-1">

                    <table>
                        <thead>
                            <tr>
                                <th>Evento</th>
                                <th>Descripción</th>
                                <th>Elementos para los que está definido</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>onblur</code></td>
                                <td>Un elemento pierde el foco</td>
                                <td><code>&lt;button&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;label&gt;</code>,
                                    <code>&lt;select&gt;</code>, <code>&lt;textarea&gt;</code>,
                                    <code>&lt;body&gt;</code>
                                </td>
                            </tr>
                            <tr>
                                <td><code>onchange</code></td>
                                <td>Un elemento ha sido modificado</td>
                                <td><code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>,
                                    <code>&lt;textarea&gt;</code>
                                </td>
                            </tr>
                            <tr>
                                <td><code>onclick</code></td>
                                <td>Pulsar y soltar el ratón</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>ondblclick</code></td>
                                <td>Pulsar dos veces seguidas con el ratón</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onfocus</code></td>
                                <td>Un elemento obtiene el foco</td>
                                <td><code>&lt;button&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;label&gt;</code>,
                                    <code>&lt;select&gt;</code>, <code>&lt;textarea&gt;</code>,
                                    <code>&lt;body&gt;</code>
                                </td>
                            </tr>
                            <tr>
                                <td><code>onkeydown</code></td>
                                <td>Pulsar una tecla y no soltarla</td>
                                <td>Elementos de formulario y <code>&lt;body&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onkeypress</code></td>
                                <td>Pulsar una tecla</td>
                                <td>Elementos de formulario y <code>&lt;body&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onkeyup</code></td>
                                <td>Soltar una tecla pulsada</td>
                                <td>Elementos de formulario y <code>&lt;body&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onload</code></td>
                                <td>Página cargada completamente</td>
                                <td><code>&lt;body&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onmousedown</code></td>
                                <td>Pulsar un botón del ratón y no soltarlo</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onmousemove</code></td>
                                <td>Mover el ratón</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onmouseout</code></td>
                                <td>El ratón "sale" del elemento</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onmouseover</code></td>
                                <td>El ratón "entra" en el elemento</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onmouseup</code></td>
                                <td>Soltar el botón del ratón</td>
                                <td>Todos los elementos</td>
                            </tr>
                            <tr>
                                <td><code>onreset</code></td>
                                <td>Inicializar el formulario</td>
                                <td><code>&lt;form&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onresize</code></td>
                                <td>Modificar el tamaño de la ventana</td>
                                <td><code>&lt;body&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onselect</code></td>
                                <td>Seleccionar un texto</td>
                                <td><code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onsubmit</code></td>
                                <td>Enviar el formulario</td>
                                <td><code>&lt;form&gt;</code></td>
                            </tr>
                            <tr>
                                <td><code>onunload</code></td>
                                <td>Se abandona la página, por ejemplo al cerrar el navegador</td>
                                <td><code>&lt;body&gt;</code></td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <p class="font-weight-light"><cite title="Source Title"> referencia
                        https://www.arkaitzgarro.com/javascript/capitulo-15.html</cite></p>

                <br>
                <p>Tambien esta el caso en el que necesites validar el formulario cuando le des click al boton submit o
                    enviar y en esa situación en vez de
                    pendiente a un evento que ejecute tu codigo que valide simplementelo gatillas tus validaciones con
                    el boton de enviar
                </p>

                <p>Mini formulario:</p>


                <form method="POST" id="myForm" action="algunlugar"
                    onsubmit="event.preventDefault();validateMyForm(event);">
                    <label for="edad">Edad</label>
                    <input type="text" name="edad" id="edad">
                    <p id="edadError" class="p-1 mb-2 bg-danger  text-white edadError errores">Validar edad pro favor
                    </p>
                    <div id="exito" class="p-1 mb-2 bg-success text-white d-none">Formulario enviado con exito</div>
                    <button id="btnEnviar" type="submit">enviar</button>
                </form>
                <br><br><br>

                <p>Ejemplo codigo html:</p>
                <pre>
                    <code>
                        &lt;input type="text" name="nombre" id="inputDireccion"&gt; 
                        &lt;form method="POST" id="myForm" action="algunlugar" onsubmit="event.preventDefault();validateMyForm(event);"&gt; 
                            &lt;label for="edad"&gt;Edad&lt;/label&gt; 
                            &lt;input type="text" name="edad" id="edad"&gt; 
                            &lt;p id="edadError" class="p-1 mb-2 bg-danger  text-white edadError errores"&gt;Validar edad pro favor &lt;/p&gt; 
                            &lt;div id="exito" class="p-1 mb-2 bg-success text-white d-none"&gt;Formulario enviado con exito&lt;/div&gt; 
                            &lt;button id="btnEnviar" type="submit"&gt;enviar&lt;/button&gt; 
                        &lt;/form&gt; 
                    </code>
                </pre>
                <br><br>
                <p>Código JS:</p>
                <pre>
                    <code>
                        function validateMyForm(event){
                            //expresion regular que acepta solo numeros
                            console.log('hola',event)
                            let reg = /^\d+$/;
                            let edad = document.getElementById('edad')
                            let myForm = document.getElementById('myForm')
                            let edadError = document.getElementById('edadError')
                            
                            
                            //validando que el valor de edad sea numeros
                            if(reg.test(edad.value)){
                                console.log('es valido');
                                let btnEnviar = document.getElementById('btnEnviar')
                                let mjsExito = document.getElementById('exito')
                                mjsExito.classList.remove('d-none')
                                edadError.style.display = 'none'
                                btnEnviar.disabled = true
                                //enviar el supuesto formulario
                                // myForm.submit()
                            }else{
                                //mostrar errores
                                edadError.style.display = 'block'
                            }
                            // myForm.submit()
                        }<br>
                    </code>
                </pre>
                <br>
                <br>
                <script>
                    let inputNumbre = document.getElementById('inputNombre')
                    inputNumbre.addEventListener('keydown', function (e) {
                        alert(e.target.value)
                    })

                    let inputDireccion = document.getElementById('inputDireccion')
                    inputDireccion.addEventListener('focusout', function (e) {
                        inputDireccion.style.borderColor = ''
                        if (e.target.value.length < 3) {
                            inputDireccion.style.borderColor = 'red'
                        }
                    })

                    function validateMyForm (event) {
                        //expresion regular que acepta solo numeros
                        console.log('hola', event)
                        let reg = /^\d+$/;
                        let edad = document.getElementById('edad')
                        let myForm = document.getElementById('myForm')
                        let edadError = document.getElementById('edadError')


                        //validando que el valor de edad sea numeros
                        if (reg.test(edad.value)) {
                            console.log('es valido');
                            let btnEnviar = document.getElementById('btnEnviar')
                            let mjsExito = document.getElementById('exito')
                            mjsExito.classList.remove('d-none')
                            edadError.style.display = 'none'
                            btnEnviar.disabled = true

                            //enviar el supuesto formulario
                            // myForm.submit()
                        } else {
                            //mostrar errores

                            edadError.style.display = 'block'
                        }

                        // myForm.submit()
                    }

                </script>

            </div>
        </div>
        <!-- <form class="mt-5">
            <div class="form-group">
                <label for="exampleInputEmail1">Email address</label>
                <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                    placeholder="Enter email">
                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone
                    else.</small>
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Password</label>
                <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
            </div>
            <div class="form-group form-check">
                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form> -->
    </div>
</body>

</html>